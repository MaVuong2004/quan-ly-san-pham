<!DOCTYPE html> <html lang="vi"> <head> <meta charset="UTF-8"> <title>Qu·∫£n l√Ω s·∫£n ph·∫©m b·∫±ng QR</title> <script src="https://unpkg.com/html5-qrcode"></script> <style> body { font-family: Arial, sans-serif; padding: 20px; } #reader { width: 300px; margin-bottom: 20px; } #manual-input { margin-top: 20px; } input[type="text"] { padding: 6px; font-size: 16px; } button { padding: 6px 10px; font-size: 16px; } li { margin: 5px 0; } </style> </head> <body> <h1>Qu√©t s·∫£n ph·∫©m</h1> <div id="reader"></div> <h2>Danh s√°ch s·∫£n ph·∫©m:</h2> <ul id="product-list"></ul> <h2>T·ªïng ti·ªÅn: <span id="total">0</span> VNƒê</h2> <div id="manual-input"> <input type="text" id="manual-id" placeholder="Nh·∫≠p m√£ s·∫£n ph·∫©m..." onkeyup="handleKey(event)"> <button onclick="addManual()">‚úî Th√™m</button> </div> <script> const sheetURL = "https://docs.google.com/spreadsheets/d/1ZETWL6NP4soFwOMrw03p8o32a3Mbh3tgx--M4sOgZZ0/export?format=csv"; let products = {}; let total = 0; // T·∫£i d·ªØ li·ªáu t·ª´ Google Sheets fetch(sheetURL) .then(res => res.text()) .then(csv => { const lines = csv.trim().split("\n"); lines.slice(1).forEach(line => { const [id, name, price] = line.split(","); if (id && name && price) { const cleanId = id.trim().toUpperCase(); const cleanPrice = parseInt(price.replace(/[^\d]/g, "")); products[cleanId] = { name: name.trim(), price: cleanPrice }; console.log("‚úÖ N·∫°p:", cleanId, products[cleanId]); } }); }); function addProduct(id) { const key = id.trim().toUpperCase(); if (!products[key]) { alert("‚ùå Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m: " + key); return; } const li = document.createElement("li"); li.textContent = `‚úî ${products[key].name} - ${products[key].price.toLocaleString("vi-VN")} VNƒê`; document.getElementById("product-list").appendChild(li); total += products[key].price; document.getElementById("total").textContent = total.toLocaleString("vi-VN"); } function addManual() { const input = document.getElementById("manual-id"); const id = input.value; if (id) { console.log("üñä Nh·∫≠p tay:", id); addProduct(id); input.value = ""; } } function handleKey(e) { if (e.key === "Enter") { addManual(); } } // Qu√©t QR n·∫øu thi·∫øt b·ªã h·ªó tr·ª£ if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) { new Html5Qrcode("reader").start( { facingMode: "environment" }, { fps: 10, qrbox: 250 }, decodedText => { const id = decodedText.trim(); console.log("üì∑ Qu√©t:", id); addProduct(id); } ).catch(err => console.error("‚ùå L·ªói camera:", err)); } else { document.getElementById("reader").textContent = "Thi·∫øt b·ªã kh√¥ng h·ªó tr·ª£ camera."; } </script> </body> </html>
